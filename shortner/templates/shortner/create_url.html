{% extends 'myapp/base.html' %}
{% load static %}

{% block title %}Create Short URL{% endblock %}

{% block body %}
    <!-- User Profile Header -->
    {% include 'shortner/cover.html' %}
    
    <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        {% include 'shortner/sidebar.html' %}
        
        <!-- Main Content Area (Scrollable) -->
        <main class="main-content">
            <!-- Page Header -->
            <div class="page-header">
                <h1>Create New Short URL</h1>
                <p>Quickly shorten your long URLs with custom options</p>
            </div>

            <!-- Form Section -->
            <div class="form-container">
                {% if form.errors %}
                <div class="alerts-container">
                    {% for error in form.non_field_errors %}
                        <div class="alert alert-error">
                            {{ error }}
                            <span class="close-btn" onclick="this.parentElement.style.display='none'">&times;</span>
                        </div>
                    {% endfor %}
                    {% for field in form %}
                        {% if field.errors %}
                            {% for error in field.errors %}
                                <div class="alert alert-error">
                                    <strong>{{ field.label }}</strong>: {{ error }}
                                    <span class="close-btn" onclick="this.parentElement.style.display='none'">&times;</span>
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                <form method="post" class="url-form">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label for="{{ form.original_url.id_for_label }}">Original URL *</label>
                        <input type="url" 
                               id="{{ form.original_url.id_for_label }}" 
                               name="{{ form.original_url.name }}" 
                               class="form-control" 
                               placeholder="https://example.com/very-long-url-path" 
                               required
                               value="{{ form.original_url.value|default:'' }}">
                        <div class="form-help">Must start with http:// or https://</div>
                    </div>

                    <div class="form-group">
                        <label for="{{ form.short_code.id_for_label }}">Custom Short Code</label>
                        <input type="text" 
                               id="{{ form.short_code.id_for_label }}" 
                               name="{{ form.short_code.name }}" 
                               class="form-control" 
                               placeholder="my-custom-link"
                               value="{{ form.short_code.value|default:'' }}">
                        <div class="form-help">Optional - Leave blank for auto-generation</div>
                    </div>

                    <div class="form-group">
                        <label for="{{ form.expiration_date.id_for_label }}">Expiration Date</label>
                        <input type="date" 
                               id="{{ form.expiration_date.id_for_label }}" 
                               name="{{ form.expiration_date.name }}" 
                               class="form-control"
                               value="{{ form.expiration_date.value|default:'' }}">
                        <div class="form-help">Optional - URL will expire after this date</div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span>üîó</span>
                            Create Short URL
                        </button>
                        <a href="{% url 'shortner:dashboard' %}" class="btn btn-secondary">
                            <span>‚Üê</span>
                            Back to Dashboard
                        </a>
                    </div>
                </form>
            </div>
        </main>
    </div>
{% endblock %}